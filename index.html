<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ù†ÙˆØ± Ù„Ù„Ù†Ø¸Ø§Ø±Ø§Øª</title>
    <style>
        /* ==========================================================================
           Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
           ========================================================================== */
        body {
            font-family: 'Tahoma', 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }

        .main-container {
            width: 80mm;
            margin: 20px auto;
            background: #fff;
            padding: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            min-height: 100vh;
        }

        /* Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© */
        .ticket {
            border: 1px solid #ddd;
            padding: 10px;
            margin-bottom: 20px;
            background: #fff;
        }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù„Ø®Øµ (Ø§Ù„Ø¬Ø¯ÙŠØ¯) */
        .summary-section {
            margin-top: 20px;
            border-top: 2px solid #333;
            padding-top: 10px;
        }
        
        .summary-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 11px;
        }
        
        .summary-table th {
            background-color: #333;
            color: #fff;
            padding: 5px;
            text-align: center;
        }
        
        .summary-table td {
            border-bottom: 1px solid #ddd;
            padding: 5px;
            text-align: center;
        }

        .delete-btn {
            background-color: #dc3545;
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            padding: 2px 5px;
            font-size: 10px;
        }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù…Ø®ÙÙŠØ© (ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„ÙƒØ§Ù…Ù„Ø©) */
        #hidden-print-area {
            display: none;
        }

        /* Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø¯Ø§Ø®Ù„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ */
        .saved-ticket {
            border-bottom: 2px dashed #000;
            padding: 15px 0;
            display: block;
        }

        /* Ø§Ù„Ù†ØµÙˆØµ ÙˆØ§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† */
        h3, p { margin: 5px 0; color: #000; }
        
        .header {
            text-align: center;
            border-bottom: 2px solid #000;
            padding-bottom: 10px;
            margin-bottom: 10px;
        }

        .logo-text { font-size: 24px; font-weight: bold; display: block; }
        .sub-logo { font-size: 14px; }

        .info-section {
            font-size: 13px;
            margin-bottom: 10px;
            border-bottom: 1px dashed #000;
            padding-bottom: 5px;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }

        /* Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª */
        select, input[type="number"], input[type="text"] {
            font-family: 'Tahoma', 'Arial', sans-serif;
            font-size: 12px;
            border: 1px solid #ccc;
            padding: 2px 5px;
            border-radius: 3px;
            background-color: #fff;
            font-weight: bold;
            color: #000;
        }
        
        .price-input { width: 80px; text-align: center; }
        .invoice-num-input { width: 100px; text-align: inherit; } 
        .employee-select { width: 140px; text-align: inherit; font-weight: bold; }

        /* Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
        table { width: 100%; border-collapse: collapse; margin: 10px 0; font-size: 12px; }
        th, td { border: 1px solid #000; padding: 5px; text-align: center; }
        th { background-color: #eee; font-weight: bold; }
        td select { width: 100%; }

        /* Ø§Ù„ØªÙØ§ØµÙŠÙ„ ÙˆØ§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ */
        .details-section { font-size: 13px; margin-top: 10px; font-weight: bold; }
        body[dir="rtl"] .details-section { text-align: right; }
        body[dir="ltr"] .details-section { text-align: left; }

        .detail-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .total-row {
            border-top: 2px solid #000;
            padding-top: 5px;
            margin-top: 5px;
            font-weight: 900;
            font-size: 14px;
        }

        .footer {
            margin-top: 20px;
            text-align: center;
            font-size: 12px;
            padding-top: 10px;
            border-top: 1px dashed #000;
        }

        .signature-box { margin-top: 15px; display: flex; align-items: center; justify-content: flex-start; gap: 10px; }
        .signature-line { margin-top: 20px; display: flex; justify-content: space-between; }

        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
        .controls { display: flex; flex-direction: column; gap: 10px; margin-bottom: 20px; }
        .btn {
            display: block; width: 100%; padding: 12px; color: white; text-align: center;
            border: none; cursor: pointer; font-size: 14px; border-radius: 4px;
            font-family: 'Tahoma', sans-serif; font-weight: bold;
        }
        .print-current-btn { background-color: #007bff; font-size: 16px; } 
        .print-daily-btn { background-color: #28a745; } 
        .clear-btn { background-color: #dc3545; font-size: 12px; padding: 8px; }
        .lang-btn { background-color: #6c757d; font-size: 12px; padding: 8px; }

        /* Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ø³Ù‡Ù… */
        input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        
        /* ==========================================================================
           Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© (Ø§Ù„Ø°ÙƒÙŠØ©)
           ========================================================================== */
        @media print {
            @page { size: 80mm auto; margin: 0; }
            body { background-color: #fff; margin: 0; }
            .main-container { width: 100%; margin: 0; box-shadow: none; border: none; }
            .controls { display: none !important; } 
            .ticket { border: none; margin: 0; } 
            
            select, input { border: none !important; background: transparent !important; padding: 0; appearance: none; -webkit-appearance: none; }
            .employee-select, select { text-indent: 1px; text-overflow: ''; }
            input::placeholder { color: transparent; }
            
            .price-input { text-align: inherit; }
            body[dir="ltr"] .price-input { text-align: left; }
            body[dir="rtl"] .price-input { text-align: left; direction: ltr; }
            
            .delete-btn { display: none !important; } /* Ø¥Ø®ÙØ§Ø¡ Ø²Ø± Ø§Ù„Ø­Ø°Ù ÙÙŠ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© */

            /* --- Ù…Ù†Ø·Ù‚ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© --- */
            
            /* Ø§Ù„ÙˆØ¶Ø¹ 1: Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙÙ‚Ø· */
            body:not(.printing-report) .summary-section { display: none !important; }
            body:not(.printing-report) #hidden-print-area { display: none !important; }
            body:not(.printing-report) #current-ticket-area { display: block !important; }

            /* Ø§Ù„ÙˆØ¶Ø¹ 2: Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ (Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„ÙƒØ§Ù…Ù„Ø©) */
            body.printing-report #current-ticket-area { display: none !important; }
            body.printing-report .summary-section { display: none !important; }
            body.printing-report #hidden-print-area { display: block !important; }
            
            body.printing-report .saved-ticket {
                page-break-after: always;
                display: block !important;
                border-bottom: 1px dashed #000;
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>

<div class="main-container">
    <div class="controls">
        <button class="btn print-current-btn" onclick="printAndSave()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© ÙˆØ­ÙØ¸ Ø§Ù„ÙØ§ØªÙˆØ±Ø©</button>
        
        <div style="display: flex; gap: 5px;">
            <button class="btn print-daily-btn" onclick="printDailyReport()" data-i18n="print_all_btn">ğŸ“‘ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ (<span id="count">0</span>)</button>
            <button class="btn lang-btn" onclick="toggleLanguage()">EN/AR</button>
        </div>
        
        <button class="btn clear-btn" onclick="clearArchive()" data-i18n="clear_btn">âš ï¸ Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„ (ÙŠÙˆÙ… Ø¬Ø¯ÙŠØ¯)</button>
    </div>

    <div id="current-ticket-area" class="ticket">
        <div class="header">
            <span class="logo-text">NOOR Opticals</span>
            <span class="sub-logo">Ù†Ù€Ù€Ù€ÙˆØ± Ù„Ù„Ù†Ø¸Ø§Ø±Ø§Øª</span>
            <h3 data-i18n="invoice_title">ÙØ§ØªÙˆØ±Ø© Ø·Ù„Ø¨ Ø¹Ø¯Ø³Ø§Øª</h3>
        </div>

        <div class="info-section">
            <div class="info-row">
                <label data-i18n="invoice_num">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©:</label>
                <input type="text" id="inv-num" class="invoice-num-input" placeholder="0001">
            </div>

            <div class="info-row">
                <label data-i18n="branch">Ø§Ù„ÙØ±Ø¹:</label>
                <select id="branch-select" onchange="updateEmployees()" style="width: auto;">
                    <option value="Noor 1">Noor 1</option>
                    <option value="Noor 2">Noor 2</option>
                    <option value="Noor 3">Noor 3</option>
                    <option value="Noor 4">Noor 4</option>
                </select>
            </div>
            <div class="info-row">
                <span><span data-i18n="date">Ø§Ù„ØªØ§Ø±ÙŠØ®:</span> <span id="current-date"></span></span>
                <span><span data-i18n="time">Ø§Ù„ÙˆÙ‚Øª:</span> <span id="current-time">--:--:--</span></span>
            </div>
        </div>

        <table>
            <thead>
                <tr>
                    <th data-i18n="eye_header">Ø§Ù„Ø¹ÙŠÙ†</th>
                    <th>SPH</th>
                    <th>CYL</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td data-i18n="right_eye">R (ÙŠÙ…ÙŠÙ†)</td>
                    <td class="measurement-cell"><select id="r-sph" class="diopter-select"></select></td>
                    <td class="measurement-cell"><select id="r-cyl" class="diopter-select"></select></td>
                </tr>
                <tr>
                    <td data-i18n="left_eye">L (ÙŠØ³Ø§Ø±)</td>
                    <td class="measurement-cell"><select id="l-sph" class="diopter-select"></select></td>
                    <td class="measurement-cell"><select id="l-cyl" class="diopter-select"></select></td>
                </tr>
            </tbody>
        </table>

        <div class="details-section">
            <div class="detail-row">
                <strong data-i18n="lens_type">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ø¯Ø³Ø©:</strong>
                <select id="lens-type" class="lens-select">
                    <option value="MC">MC (Ù…Ù„ØªÙŠ ÙƒÙˆØª)</option>
                    <option value="Bl cut">Bl cut (Ø¨Ù„Ùˆ ÙƒØª)</option>
                    <option value="Bl cut Blue">Bl cut Blue</option>
                    <option value="Bl cut Green">Bl cut Green</option>
                    <option value="PGX">PGX (ÙÙˆØªÙˆ Ù‚Ø±ÙŠ)</option>
                    <option value="PGX Brown">PGX Brown (ÙÙˆØªÙˆ Ø¨Ø±Ø§ÙˆÙ†)</option>
                    <option value="Progressive">Progressive (Ù‚Ø±ÙŠØ¨ Ø¨Ø¹ÙŠØ¯)</option>
                    <option value="Poly">Poly (Ø¶Ø¯ Ø§Ù„ÙƒØ³Ø±)</option>
                    <option value="CR39">CR39 (Ù†ÙˆØ±Ù…Ù„)</option>
                    <option value="Other">Other...</option>
                </select>
            </div>
            
            <div class="detail-row">
                <strong data-i18n="lens_price">Ø³Ø¹Ø± Ø§Ù„Ø¹Ø¯Ø³Ø©:</strong>
                <input type="number" id="lens-price" class="price-input" placeholder="0" oninput="calculateTotal()">
            </div>
            
            <div class="detail-row">
                <strong data-i18n="install_price">Ø³Ø¹Ø± Ø§Ù„ØªØ±ÙƒÙŠØ¨:</strong>
                <input type="number" id="install-price" class="price-input" placeholder="0" oninput="calculateTotal()">
            </div>

            <div class="detail-row total-row">
                <strong data-i18n="total">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</strong>
                <input type="text" id="total-price" class="price-input" value="0" readonly style="font-weight: bold;">
            </div>
        </div>

        <div class="footer">
            <div class="signature-box">
                <strong data-i18n="employee">Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù:</strong>
                <select id="emp-select" class="employee-select"></select>
            </div>
            <br>
            <div class="signature-line">
                <strong data-i18n="signature">Ø§Ù„ØªÙˆÙ‚ÙŠØ¹:</strong>
                <span>.........................</span>
            </div>
            <p style="margin-top: 15px;" data-i18n="thanks">Ø´ÙƒØ±Ø§Ù‹ Ù„Ø²ÙŠØ§Ø±ØªÙƒÙ…</p>
        </div>
    </div>

    <div class="summary-section">
        <h4 style="text-align: center;">Ø³Ø¬Ù„ Ø§Ù„ÙŠÙˆÙ… (Daily Log)</h4>
        <table class="summary-table">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>
                    <th>Ø§Ù„ÙˆÙ‚Øª</th>
                    <th>Ø§Ù„Ø³Ø¹Ø±</th>
                    <th>Ø­Ø°Ù</th>
                </tr>
            </thead>
            <tbody id="summary-body">
                </tbody>
        </table>
    </div>

    <div id="hidden-print-area"></div>

</div>

<script>
    // ==========================================
    // 1. Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    // ==========================================
    const employeesData = {
        "Noor 1": ["Ø¹Ù…Ø±", "Ø³ÙŠØ¯", "Ù…Ù‡Ø¯ÙŠ", "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø§Ù„Ø²Ù‡Ø±Ø§Ù†ÙŠ"],
        "Noor 2": ["Ø²Ø¨ÙŠØ±", "ÙÙˆØ§Ø² Ø²Ù‡Ø±Ø§Ù†ÙŠ"], 
        "Noor 3": ["Ø²Ø¨ÙŠØ±", "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø§Ù„Ø²Ù‡Ø±Ø§Ù†ÙŠ"],
        "Noor 4": ["Ø³Ù‡ÙŠÙ„"]
    };

    let archiveCount = 0;
    // Ù…ØµÙÙˆÙØ© Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„ÙÙˆØ§ØªÙŠØ± (Ù†Ø³ØªØ®Ø¯Ù…Ù‡Ø§ Ù„Ø±Ø¨Ø· Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¨Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø®ÙÙŠØ©)
    let invoices = [];

    // ==========================================
    // 2. Ù…Ù†Ø·Ù‚ Ø§Ù„Ø­ÙØ¸ ÙˆØ§Ù„Ø·Ø¨Ø§Ø¹Ø©
    // ==========================================
    function printAndSave() {
        saveTicketToArchive();
        window.print();
        setTimeout(() => { clearCurrentForm(); }, 1000);
    }

    function saveTicketToArchive() {
        const currentTicket = document.getElementById('current-ticket-area');
        const hiddenArea = document.getElementById('hidden-print-area');
        const summaryBody = document.getElementById('summary-body');
        
        // Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ù…Ù„Ø®Øµ
        const invNum = document.getElementById('inv-num').value || "-";
        const total = document.getElementById('total-price').value;
        const time = new Date().toLocaleTimeString('en-US', { hour12: false, hour: '2-digit', minute:'2-digit' });
        const uniqueId = Date.now(); // Ù…Ø¹Ø±Ù ÙØ±ÙŠØ¯

        // 1. Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© ÙƒØ§Ù…Ù„Ø© Ù„Ù„Ø·Ø¨Ø§Ø¹Ø© (ØªØ®ÙÙ‰ Ø­Ø§Ù„ÙŠØ§Ù‹)
        const clone = currentTicket.cloneNode(true);
        clone.removeAttribute('id'); 
        clone.classList.add('saved-ticket');
        clone.setAttribute('data-id', uniqueId);
        
        // ØªØ«Ø¨ÙŠØª Ø§Ù„Ù‚ÙŠÙ…
        const inputs = clone.querySelectorAll('input, select');
        inputs.forEach(input => {
            const span = document.createElement('span');
            span.style.fontWeight = "bold";
            if (input.tagName === 'SELECT') {
                span.innerText = input.options[input.selectedIndex].text;
            } else {
                span.innerText = input.value;
            }
            input.parentNode.replaceChild(span, input);
        });

        // Ø¥Ø¶Ø§ÙØ© ÙˆÙ‚Øª Ø§Ù„Ø­ÙØ¸ Ù„Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø·Ø¨ÙˆØ¹Ø©
        const timestamp = document.createElement('div');
        timestamp.style.fontSize = "10px";
        timestamp.style.textAlign = "center";
        timestamp.style.marginTop = "5px";
        timestamp.innerText = "#" + (archiveCount + 1) + " | " + time;
        clone.appendChild(timestamp);

        hiddenArea.appendChild(clone);

        // 2. Ø¥Ø¶Ø§ÙØ© ØµÙ Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù„Ø®Øµ
        const row = document.createElement('tr');
        row.setAttribute('data-id', uniqueId);
        row.innerHTML = `
            <td>${archiveCount + 1}</td>
            <td>${invNum}</td>
            <td style="direction: ltr;">${time}</td>
            <td>${total}</td>
            <td><button class="delete-btn" onclick="deleteInvoice(${uniqueId})">X</button></td>
        `;
        summaryBody.appendChild(row);
        
        archiveCount++;
        document.getElementById('count').innerText = archiveCount;
    }

    function deleteInvoice(id) {
        if(!confirm("Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©ØŸ")) return;

        // Ø­Ø°Ù Ù…Ù† Ø§Ù„Ø¬Ø¯ÙˆÙ„
        const row = document.querySelector(`tr[data-id="${id}"]`);
        if(row) row.remove();

        // Ø­Ø°Ù Ù…Ù† Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù…Ø®ÙÙŠØ©
        const ticket = document.querySelector(`.saved-ticket[data-id="${id}"]`);
        if(ticket) ticket.remove();

        archiveCount--;
        document.getElementById('count').innerText = archiveCount;
    }

    function clearCurrentForm() {
        document.getElementById('lens-price').value = "";
        document.getElementById('install-price').value = "";
        document.getElementById('total-price').value = "0";
        document.getElementById('inv-num').value = "";
        const selects = document.querySelectorAll('#current-ticket-area .diopter-select');
        selects.forEach(s => s.selectedIndex = 24); 
    }

    function printDailyReport() {
        if (archiveCount === 0) {
            alert("Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙˆØ§ØªÙŠØ± Ø§Ù„ÙŠÙˆÙ…!");
            return;
        }
        document.body.classList.add('printing-report');
        window.print();
        document.body.classList.remove('printing-report');
    }

    function clearArchive() {
        if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„ØŸ")) {
            document.getElementById('hidden-print-area').innerHTML = "";
            document.getElementById('summary-body').innerHTML = "";
            archiveCount = 0;
            document.getElementById('count').innerText = "0";
        }
    }

    // ==========================================
    // 3. Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
    // ==========================================
    function updateEmployees() {
        const branchSelect = document.getElementById('branch-select');
        const empSelect = document.getElementById('emp-select');
        const selectedBranch = branchSelect.value;
        const names = employeesData[selectedBranch] || [];
        empSelect.innerHTML = "";
        names.forEach(name => {
            const option = document.createElement('option');
            option.value = name; option.text = name; empSelect.appendChild(option);
        });
    }

    function calculateTotal() {
        const lensPrice = parseFloat(document.getElementById('lens-price').value) || 0;
        const installPrice = parseFloat(document.getElementById('install-price').value) || 0;
        document.getElementById('total-price').value = lensPrice + installPrice;
    }

    function generateOptions() {
        let options = "";
        for (let i = 6.00; i >= -6.00; i -= 0.25) {
            let val = i.toFixed(2);
            let sign = i > 0 ? "+" : "";
            let text = sign + val;
            let selected = (Math.abs(i) < 0.001) ? "selected" : ""; 
            options += `<option value="${text}" ${selected}>${text}</option>`;
        }
        return options;
    }
    const selects = document.querySelectorAll('.diopter-select');
    selects.forEach(s => s.innerHTML = generateOptions());

    function updateTime() {
        const now = new Date();
        document.getElementById('current-date').innerText = now.toLocaleDateString('en-GB');
        document.getElementById('current-time').innerText = now.toLocaleTimeString('en-US', { hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: true });
    }
    setInterval(updateTime, 1000);
    updateTime();

    const translations = {
        ar: {
            dir: "rtl",
            print_all_btn: "ğŸ“‘ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ",
            clear_btn: "âš ï¸ Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„ (ÙŠÙˆÙ… Ø¬Ø¯ÙŠØ¯)",
            invoice_title: "ÙØ§ØªÙˆØ±Ø© Ø·Ù„Ø¨ Ø¹Ø¯Ø³Ø§Øª",
            invoice_num: "Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©:",
            branch: "Ø§Ù„ÙØ±Ø¹:",
            date: "Ø§Ù„ØªØ§Ø±ÙŠØ®:",
            time: "Ø§Ù„ÙˆÙ‚Øª:",
            eye_header: "Ø§Ù„Ø¹ÙŠÙ†",
            right_eye: "R (ÙŠÙ…ÙŠÙ†)",
            left_eye: "L (ÙŠØ³Ø§Ø±)",
            lens_type: "Ù†ÙˆØ¹ Ø§Ù„Ø¹Ø¯Ø³Ø©:",
            lens_price: "Ø³Ø¹Ø± Ø§Ù„Ø¹Ø¯Ø³Ø©:",
            install_price: "Ø³Ø¹Ø± Ø§Ù„ØªØ±ÙƒÙŠØ¨:",
            total: "Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:",
            employee: "Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù:",
            signature: "Ø§Ù„ØªÙˆÙ‚ÙŠØ¹:",
            thanks: "Ø´ÙƒØ±Ø§Ù‹ Ù„Ø²ÙŠØ§Ø±ØªÙƒÙ…"
        },
        en: {
            dir: "ltr",
            print_all_btn: "ğŸ“‘ Print Daily Report",
            clear_btn: "âš ï¸ Clear Log (New Day)",
            invoice_title: "Lens Order Invoice",
            invoice_num: "Invoice No:",
            branch: "Branch:",
            date: "Date:",
            time: "Time:",
            eye_header: "Eye",
            right_eye: "R (Right)",
            left_eye: "L (Left)",
            lens_type: "Lens Type:",
            lens_price: "Lens Price:",
            install_price: "Install Price:",
            total: "Total:",
            employee: "Employee:",
            signature: "Signature:",
            thanks: "Thank You for Visiting"
        }
    };
    let currentLang = 'ar';
    function toggleLanguage() {
        currentLang = currentLang === 'ar' ? 'en' : 'ar';
        const t = translations[currentLang];
        document.documentElement.setAttribute('dir', t.dir);
        document.documentElement.lang = currentLang;
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (t[key]) {
                if (key === 'print_all_btn') {
                    const count = document.getElementById('count').innerText;
                    el.innerHTML = `${t[key]} (<span id="count">${count}</span>)`;
                } else {
                    el.innerText = t[key];
                }
            }
        });
        updateEmployees();
    }

    window.onload = updateEmployees;
</script>

</body>
</html>
